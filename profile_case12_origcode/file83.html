<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252" /><link rel="stylesheet" href="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /><title>Function details for OriginData_sm>OriginData_sm.OriginData_sm</title><link rel="stylesheet" href="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">OriginData_sm>OriginData_sm.OriginData_sm (1 call, 2.144 sec)</span><br/><i>Generated 24-Mar-2015 14:22:37 using cpu time.</i><br/>subfunction in file D:\REPOS\QUant\OriginData_sm.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file7.html">simulate_uncertainty</a></td><td class="td-linebottomrt">script</td><td class="td-linebottomrt">1</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line Number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Code</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><pre>[Hdr, Inst, Cfg, Sensor, Gps, ...</pre></td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">2.014 s</td><td class="td-linebottomrt" class="td-linebottomrt">93.9%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=94 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line263">263</a></td><td class="td-linebottomrt"><pre>obj.btVel(1:3,ii)=trans_ie*Bt....</pre></td><td class="td-linebottomrt">154</td><td class="td-linebottomrt">0.019 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.9%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line349">349</a></td><td class="td-linebottomrt"><pre>cellSizeAll(1:end,ii)=repmat(r...</pre></td><td class="td-linebottomrt">154</td><td class="td-linebottomrt">0.007 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line268">268</a></td><td class="td-linebottomrt"><pre>vel_temp=squeeze(Wt.vel_mps(:,...</pre></td><td class="td-linebottomrt">154</td><td class="td-linebottomrt">0.007 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line259">259</a></td><td class="td-linebottomrt"><pre>trans_ie=[((CH(ii).*CR)+(SH(ii...</pre></td><td class="td-linebottomrt">154</td><td class="td-linebottomrt">0.007 s</td><td class="td-linebottomrt" class="td-linebottomrt">0.3%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.090 s</td><td class="td-linebottomrt">4.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=4 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">2.144 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Name</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Function Type</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Calls</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Total Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">% Time</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="file52.html">readpd0rrss</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">1.983 s</td><td class="td-linebottomrt">92.5%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=92 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file112.html">repmat</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">163</td><td class="td-linebottomrt">0.008 s</td><td class="td-linebottomrt">0.4%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file116.html">squeeze</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">154</td><td class="td-linebottomrt">0.005 s</td><td class="td-linebottomrt">0.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file114.html">nanmax</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">311</td><td class="td-linebottomrt">0.004 s</td><td class="td-linebottomrt">0.2%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file119.html">nandiff</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file118.html">nansum</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">3</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file115.html">nanmin</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt"><a href="file81.html">strcat</a></td><td class="td-linebottomrt">function</td><td class="td-linebottomrt">1</td><td class="td-linebottomrt">0 s</td><td class="td-linebottomrt">0%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=0 height=10></td></tr><tr><td class="td-linebottomrt">Self time (built-ins, overhead, etc.)</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">0.144 s</td><td class="td-linebottomrt">6.7%</td><td class="td-linebottomrt"><img src="file:///C:\Program Files (x86)\MATLAB\R2012a\toolbox\matlab\codetools\private\one-pixel.gif" width=7 height=10></td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Totals</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td><td class="td-linebottomrt" bgcolor="#F0F0F0">2.144 s</td><td class="td-linebottomrt" bgcolor="#F0F0F0">100%</td><td class="td-linebottomrt" bgcolor="#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><strong>Code Analyzer results</strong><br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Line number</td><td class="td-linebottomrt" bgcolor="#F0F0F0">Message</td></tr><tr><td class="td-linebottomrt"><a href="#Line100">100</a></td><td class="td-linebottomrt"><span class="mono">Input argument 'MMT' might be unused, although a later one is used.  Consider replacing it by ~.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line100">100</a></td><td class="td-linebottomrt"><span class="mono">Extra semicolon is unnecessary.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Cfg'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Wt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Bt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to 'Nmea' appears to be unused.  Consider replacing it by ~.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">The value assigned here to 'Gps2' appears to be unused.  Consider replacing it by ~.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line119">119</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Surface'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line123">123</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Cfg'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line124">124</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Bt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line125">125</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Wt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line126">126</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line127">127</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Surface'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line128">128</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line129">129</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line182">182</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line186">186</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Cfg'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line187">187</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Cfg'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line188">188</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Cfg'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line190">190</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Bt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line192">192</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Cfg'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line193">193</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Wt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line205">205</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Surface'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line206">206</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Surface'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line209">209</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Surface'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line210">210</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Surface'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line211">211</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Wt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line263">263</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Bt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line264">264</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Bt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line268">268</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Wt'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line348">348</a></td><td class="td-linebottomrt"><span class="mono">Use of brackets [] is unnecessary. Use parentheses to group, if needed.</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line364">364</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line364">364</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line364">364</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr><tr><td class="td-linebottomrt"><a href="#Line364">364</a></td><td class="td-linebottomrt"><span class="mono">There is a property named 'Sensor'. Did you mean to reference it?</span></td></tr></table><div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory <br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Total lines in function</td><td class="td-linebottomrt">304</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">125</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">179</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">161</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">18</td></tr><tr><td class="td-linebottomrt" bgcolor="#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">89.94 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><pre> <span style="color: #FF0000; font-weight: bold; text-decoration: none">  time</span> <span style="color: #0000FF; font-weight: bold; text-decoration: none">  calls</span>  <span style="font-weight: bold; text-decoration: none">line</span><br/><a name="Line100"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 100</span> <span style="color: #000000; background: #FFFFFF;">        function obj=OriginData_sm(filename,pathname,nn, MMT, MMT_Active_Config, top, bot, exponent); </span><br/>               <span style="color: #A0A0A0"> 101</span> <span style="color: #228B22; background: #FFFFFF;">            </span><br/>               <span style="color: #A0A0A0"> 102</span> <span style="color: #228B22; background: #FFFFFF;">            </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 103</span> <span style="color: #000000; background: #FFFFFF;">            obj.magDec = MMT_Active_Config.Offsets_Magnetic_Variation(nn); </span><br/>               <span style="color: #A0A0A0"> 104</span> <span style="color: #228B22; background: #FFFFFF;">            </span><br/>               <span style="color: #A0A0A0"> 105</span> <span style="color: #228B22; background: #FFFFFF;">            %</span><br/>               <span style="color: #A0A0A0"> 106</span> <span style="color: #228B22; background: #FFFFFF;">            % Constructor method</span><br/>               <span style="color: #A0A0A0"> 107</span> <span style="color: #228B22; background: #FFFFFF;">            %==================================================================</span><br/>               <span style="color: #A0A0A0"> 108</span> <span style="color: #228B22; background: #FFFFFF;">            %</span><br/>               <span style="color: #A0A0A0"> 109</span> <span style="color: #228B22; background: #FFFFFF;">            % If no arguments just create object</span><br/>               <span style="color: #A0A0A0"> 110</span> <span style="color: #228B22; background: #FFFFFF;">            % ----------------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 111</span> <span style="color: #000000; background: #FFFFFF;">            if nargin&gt;0 </span><br/>               <span style="color: #A0A0A0"> 112</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>               <span style="color: #A0A0A0"> 113</span> <span style="color: #228B22; background: #FFFFFF;">                %--------------------------------------------------------------</span><br/>               <span style="color: #A0A0A0"> 114</span> <span style="color: #228B22; background: #FFFFFF;">                % Read and prepare data from PD0 file</span><br/>               <span style="color: #A0A0A0"> 115</span> <span style="color: #228B22; background: #FFFFFF;">                %--------------------------------------------------------------</span><br/>               <span style="color: #A0A0A0"> 116</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 117</span> <span style="color: #000000; background: #FFFFFF;">                fullName=<a href="file81.html">strcat</a>(pathname,filename); </span><br/>               <span style="color: #A0A0A0"> 118</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/><a name="Line119"></a><span style="color: #FF0000">  2.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 119</span> <a name="Line119"></a><span style="color: #000000; background: #FF8080;">                [Hdr, Inst, Cfg, Sensor, Gps, Wt, Bt, Nmea, Gps2, Surface, AutoMode]=<a href="file52.html">readpd0rrss</a>(fullName); </span><br/>               <span style="color: #A0A0A0"> 120</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>               <span style="color: #A0A0A0"> 121</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 122</span> <span style="color: #000000; background: #FFFFFF;">                obj.freq = Inst.freq(1); % frequency does not change </span><br/><a name="Line123"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 123</span> <span style="color: #000000; background: #FFFFFF;">                obj.Cfg = Cfg; </span><br/><a name="Line124"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 124</span> <span style="color: #000000; background: #FFFFFF;">                obj.Bt = Bt; </span><br/><a name="Line125"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 125</span> <span style="color: #000000; background: #FFFFFF;">                obj.Wt = Wt; </span><br/><a name="Line126"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 126</span> <span style="color: #000000; background: #FFFFFF;">                obj.Sensor = Sensor; </span><br/><a name="Line127"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 127</span> <span style="color: #000000; background: #FFFFFF;">                obj.Surface = Surface; </span><br/><a name="Line128"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 128</span> <span style="color: #000000; background: #FFFFFF;">                obj.temperature = Sensor.temperature_degc'; </span><br/><a name="Line129"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 129</span> <span style="color: #000000; background: #FFFFFF;">                obj.salinty = Sensor.salinity_ppt'; </span><br/>               <span style="color: #A0A0A0"> 130</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 131</span> <span style="color: #000000; background: #FFFFFF;">                obj.draft = MMT_Active_Config.Offsets_Transducer_Depth(nn); </span><br/>               <span style="color: #A0A0A0"> 132</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 133</span> <span style="color: #000000; background: #FFFFFF;">                beginL = MMT_Active_Config.Edge_Begin_Left_Bank(nn); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 134</span> <span style="color: #000000; background: #FFFFFF;">                beginR = 1 - beginL; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 135</span> <span style="color: #000000; background: #FFFFFF;">                if  MMT_Active_Config.Edge_Begin_Left_Bank(nn) == 1 </span><br/>               <span style="color: #A0A0A0"> 136</span> <span style="color: #A0A0A0; background: #FFFFFF;">                    obj.startBank = 'left';</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 137</span> <span style="color: #228B22; background: #FFFFFF;">                else </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 138</span> <span style="color: #000000; background: #FFFFFF;">                    obj.startBank = 'right'; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 139</span> <span style="color: #000000; background: #FFFFFF;">                end </span><br/>               <span style="color: #A0A0A0"> 140</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>               <span style="color: #A0A0A0"> 141</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>               <span style="color: #A0A0A0"> 142</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 143</span> <span style="color: #000000; background: #FFFFFF;">                beginDist = MMT_Active_Config.Edge_Begin_Shore_Distance(nn); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 144</span> <span style="color: #000000; background: #FFFFFF;">                endDist = MMT_Active_Config.Edge_End_Shore_Distance(nn); </span><br/>               <span style="color: #A0A0A0"> 145</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 146</span> <span style="color: #000000; background: #FFFFFF;">                 beginL = MMT_Active_Config.Edge_Begin_Left_Bank(nn); </span><br/>               <span style="color: #A0A0A0"> 147</span> <span style="color: #228B22; background: #FFFFFF;">            </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 148</span> <span style="color: #000000; background: #FFFFFF;">            if beginL == 0;  </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 149</span> <span style="color: #000000; background: #FFFFFF;">                beginR = 1; </span><br/>               <span style="color: #A0A0A0"> 150</span> <span style="color: #A0A0A0; background: #FFFFFF;">            elseif beginL == -1;</span><br/>               <span style="color: #A0A0A0"> 151</span> <span style="color: #A0A0A0; background: #FFFFFF;">                beginL = 0;</span><br/>               <span style="color: #A0A0A0"> 152</span> <span style="color: #A0A0A0; background: #FFFFFF;">                beginR = 1;</span><br/>               <span style="color: #A0A0A0"> 153</span> <span style="color: #A0A0A0; background: #FFFFFF;">            end</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 154</span> <span style="color: #000000; background: #FFFFFF;">            obj.lDist = beginDist*abs(beginL); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 155</span> <span style="color: #000000; background: #FFFFFF;">            if obj.lDist == 0 </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 156</span> <span style="color: #000000; background: #FFFFFF;">                obj.lDist = endDist; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 157</span> <span style="color: #000000; background: #FFFFFF;">            end </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 158</span> <span style="color: #000000; background: #FFFFFF;">            obj.rDist = beginDist*beginR; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 159</span> <span style="color: #000000; background: #FFFFFF;">            if obj.rDist == 0 </span><br/>               <span style="color: #A0A0A0"> 160</span> <span style="color: #A0A0A0; background: #FFFFFF;">                obj.rDist = endDist;</span><br/>               <span style="color: #A0A0A0"> 161</span> <span style="color: #A0A0A0; background: #FFFFFF;">            end</span><br/>               <span style="color: #A0A0A0"> 162</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/>               <span style="color: #A0A0A0"> 163</span> <span style="color: #228B22; background: #FFFFFF;"></span><br/>               <span style="color: #A0A0A0"> 164</span> <span style="color: #228B22; background: #FFFFFF;">             </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 165</span> <span style="color: #000000; background: #FFFFFF;">                obj.leftCoef = MMT_Active_Config.Q_Left_Edge_Coeff(nn); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 166</span> <span style="color: #000000; background: #FFFFFF;">                obj.rightCoef = MMT_Active_Config.Q_Right_Edge_Coeff(nn); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 167</span> <span style="color: #000000; background: #FFFFFF;">                obj.leftNumEns2Avg = MMT_Active_Config.Q_Shore_Pings_Avg(nn); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 168</span> <span style="color: #000000; background: #FFFFFF;">                obj.rightNumEns2Avg = MMT_Active_Config.Q_Shore_Pings_Avg(nn); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 169</span> <span style="color: #000000; background: #FFFFFF;">                obj.beamAngle = Inst.beamAng(1)'; %until march 27 2014 there was an error here, it was always zero </span><br/>               <span style="color: #A0A0A0"> 170</span> <span style="color: #228B22; background: #FFFFFF;">                % if using extrap3.m to determine top and bot coefficients</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 171</span> <span style="color: #000000; background: #FFFFFF;">                obj.topMethod = top; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 172</span> <span style="color: #000000; background: #FFFFFF;">                obj.botMethod = bot; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 173</span> <span style="color: #000000; background: #FFFFFF;">                obj.exponent = exponent; </span><br/>               <span style="color: #A0A0A0"> 174</span> <span style="color: #228B22; background: #FFFFFF;">                % if not using extrap3</span><br/>               <span style="color: #A0A0A0"> 175</span> <span style="color: #228B22; background: #FFFFFF;">                %                 obj.topMethod = MMT_Active_Config.Q_Top_Method(nn);</span><br/>               <span style="color: #A0A0A0"> 176</span> <span style="color: #228B22; background: #FFFFFF;">%                 obj.botMethod = MMT_Active_Config.Q_Bottom_Method(nn);</span><br/>               <span style="color: #A0A0A0"> 177</span> <span style="color: #228B22; background: #FFFFFF;">%                 obj.exponent = MMT_Active_Config.Q_Power_Curve_Coeff(nn);</span><br/>               <span style="color: #A0A0A0"> 178</span> <span style="color: #228B22; background: #FFFFFF;">                %</span><br/>               <span style="color: #A0A0A0"> 179</span> <span style="color: #228B22; background: #FFFFFF;">                % Check file validity</span><br/>               <span style="color: #A0A0A0"> 180</span> <span style="color: #228B22; background: #FFFFFF;">                % -------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 181</span> <span style="color: #000000; background: #FFFFFF;">                if isstruct(Hdr) </span><br/><a name="Line182"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 182</span> <span style="color: #000000; background: #FFFFFF;">                    obj.heading=Sensor.heading_deg' + obj.magDec; </span><br/>               <span style="color: #A0A0A0"> 183</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 184</span> <span style="color: #228B22; background: #FFFFFF;">                    % Retrieve data to compute sidelobe</span><br/>               <span style="color: #A0A0A0"> 185</span> <span style="color: #228B22; background: #FFFFFF;">                    % ---------------------------------</span><br/><a name="Line186"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 186</span> <span style="color: #000000; background: #FFFFFF;">                    lag=Cfg.lag_cm'./100; </span><br/><a name="Line187"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 187</span> <span style="color: #000000; background: #FFFFFF;">                    pulseLen=Cfg.xmitPulse_cm'./100; </span><br/><a name="Line188"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 188</span> <span style="color: #000000; background: #FFFFFF;">                    regCellSize=Cfg.ws_cm'./100; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 189</span> <span style="color: #000000; background: #FFFFFF;">                    regCellSize(regCellSize==0)=nan; </span><br/><a name="Line190"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 190</span> <span style="color: #000000; background: #FFFFFF;">                    obj.beamDepths=Bt.depth_m; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 191</span> <span style="color: #000000; background: #FFFFFF;">                    obj.beamDepths(obj.beamDepths&lt;0.01)=nan; % Screen bad depths reported as zero </span><br/><a name="Line192"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 192</span> <span style="color: #000000; background: #FFFFFF;">                    cell1Dist=Cfg.distBin1_cm'./100; </span><br/><a name="Line193"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 193</span> <span style="color: #000000; background: #FFFFFF;">                    obj.numEns=size(Wt.vel_mps(:,:,1),2); </span><br/>               <span style="color: #A0A0A0"> 194</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 195</span> <span style="color: #228B22; background: #FFFFFF;">                    % Beam angle is used to ID RiverRay data with variable modes and</span><br/>               <span style="color: #A0A0A0"> 196</span> <span style="color: #228B22; background: #FFFFFF;">                    % lags</span><br/>               <span style="color: #A0A0A0"> 197</span> <span style="color: #228B22; background: #FFFFFF;">                    % --------------------------------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 198</span> <span style="color: #000000; background: #FFFFFF;">                    if Inst.beamAng(1)&gt;21 </span><br/>               <span style="color: #A0A0A0"> 199</span> <span style="color: #A0A0A0; background: #FFFFFF;">                        lag(AutoMode.Beam1.mode&lt;2 | AutoMode.Beam1.mode&gt;4)=0;</span><br/>               <span style="color: #A0A0A0"> 200</span> <span style="color: #A0A0A0; background: #FFFFFF;">                    end</span><br/>               <span style="color: #A0A0A0"> 201</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 202</span> <span style="color: #228B22; background: #FFFFFF;">                    % surf* data are to accomodate RiverRay. readpd0rr2 sets these</span><br/>               <span style="color: #A0A0A0"> 203</span> <span style="color: #228B22; background: #FFFFFF;">                    % values to nan when reading Rio Grande or StreamPro data</span><br/>               <span style="color: #A0A0A0"> 204</span> <span style="color: #228B22; background: #FFFFFF;">                    % -----------------------------------------------------------</span><br/><a name="Line205"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 205</span> <span style="color: #000000; background: #FFFFFF;">                    surfCells_idx=find(isnan(Surface.no_cells)); </span><br/><a name="Line206"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 206</span> <span style="color: #000000; background: #FFFFFF;">                    noSurfCells=Surface.no_cells'; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 207</span> <span style="color: #000000; background: #FFFFFF;">                    noSurfCells(surfCells_idx)=0; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 208</span> <span style="color: #000000; background: #FFFFFF;">                    maxSurfCells=<a href="file114.html">nanmax</a>(noSurfCells); </span><br/><a name="Line209"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 209</span> <span style="color: #000000; background: #FFFFFF;">                    surfCellSize=Surface.cell_size_cm'./100; </span><br/><a name="Line210"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 210</span> <span style="color: #000000; background: #FFFFFF;">                    surfCell1Dist=Surface.dist_bin1_cm'./100; </span><br/><a name="Line211"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 211</span> <span style="color: #000000; background: #FFFFFF;">                    numRegCells=size(Wt.vel_mps,1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 212</span> <span style="color: #000000; background: #FFFFFF;">                    obj.maxCells=maxSurfCells+numRegCells; </span><br/>               <span style="color: #A0A0A0"> 213</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 214</span> <span style="color: #228B22; background: #FFFFFF;">                    % Beam angle is used to ID RiverRay data with variable modes and</span><br/>               <span style="color: #A0A0A0"> 215</span> <span style="color: #228B22; background: #FFFFFF;">                    % lags</span><br/>               <span style="color: #A0A0A0"> 216</span> <span style="color: #228B22; background: #FFFFFF;">                    % --------------------------------------------------------------</span><br/>               <span style="color: #A0A0A0"> 217</span> <span style="color: #228B22; background: #FFFFFF;">                    %if Inst.beamAng(1)&lt;21</span><br/>               <span style="color: #A0A0A0"> 218</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 219</span> <span style="color: #228B22; background: #FFFFFF;">                    % Compute side lobe interference limit</span><br/>               <span style="color: #A0A0A0"> 220</span> <span style="color: #228B22; background: #FFFFFF;">                    % ------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 221</span> <span style="color: #000000; background: #FFFFFF;">                    lagEffect_m=(lag+pulseLen+regCellSize)./2; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 222</span> <span style="color: #000000; background: #FFFFFF;">                    depthmin=<a href="file115.html">nanmin</a>(obj.beamDepths); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 223</span> <span style="color: #000000; background: #FFFFFF;">                    lastcell=depthmin.*cosd(Inst.beamAng(1)')-(lagEffect_m); </span><br/>               <span style="color: #A0A0A0"> 224</span> <span style="color: #228B22; background: #FFFFFF;">             </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 225</span> <span style="color: #000000; background: #FFFFFF;">                    obj.numCells=max([floor(((lastcell-cell1Dist)./regCellSize)+1); zeros(size(lastcell))],[],1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 226</span> <span style="color: #000000; background: #FFFFFF;">                    obj.numCells(obj.numCells&gt;numRegCells)=numRegCells; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 227</span> <span style="color: #000000; background: #FFFFFF;">                    if <a href="file114.html">nanmax</a>(noSurfCells)&gt;0 </span><br/>               <span style="color: #A0A0A0"> 228</span> <span style="color: #A0A0A0; background: #FFFFFF;">                        obj.numCells=obj.numCells+noSurfCells;</span><br/>               <span style="color: #A0A0A0"> 229</span> <span style="color: #A0A0A0; background: #FFFFFF;">                    end</span><br/>               <span style="color: #A0A0A0"> 230</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 231</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 232</span> <span style="color: #228B22; background: #FFFFFF;">                    % Create matrix with only cells above sidelobe</span><br/>               <span style="color: #A0A0A0"> 233</span> <span style="color: #228B22; background: #FFFFFF;">                    % ---------------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 234</span> <span style="color: #000000; background: #FFFFFF;">                    obj.cellsAboveSL=ones(obj.maxCells,obj.numEns); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 235</span> <span style="color: #000000; background: #FFFFFF;">                    for j=1:obj.numEns </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 236</span> <span style="color: #000000; background: #FFFFFF;">                        for i=obj.numCells(j)+1:obj.maxCells </span><br/>       <span style="color: #0000FF">   2340 </span><span style="color: #000000; font-weight: bold"> 237</span> <span style="color: #000000; background: #FFFFFF;">                            obj.cellsAboveSL(i,j)=nan; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">   2340 </span><span style="color: #000000; font-weight: bold"> 238</span> <span style="color: #000000; background: #FFFFFF;">                        end </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 239</span> <span style="color: #000000; background: #FFFFFF;">                    end </span><br/>               <span style="color: #A0A0A0"> 240</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 241</span> <span style="color: #228B22; background: #FFFFFF;">                    % Compute bottom and water track for beam velocity data</span><br/>               <span style="color: #A0A0A0"> 242</span> <span style="color: #228B22; background: #FFFFFF;">                    % =====================================================</span><br/>               <span style="color: #A0A0A0"> 243</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 244</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 245</span> <span style="color: #228B22; background: #FFFFFF;">                    % Create variables for transformation matrix (instrument to earth)</span><br/>               <span style="color: #A0A0A0"> 246</span> <span style="color: #228B22; background: #FFFFFF;">                    % ----------------------------------------------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 247</span> <span style="color: #000000; background: #FFFFFF;">                    CH=cosd(obj.heading); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 248</span> <span style="color: #000000; background: #FFFFFF;">                    SH=sind(obj.heading); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 249</span> <span style="color: #000000; background: #FFFFFF;">                    P=atand(tand(0).*cosd(0)); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 250</span> <span style="color: #000000; background: #FFFFFF;">                    CP=cosd(P); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 251</span> <span style="color: #000000; background: #FFFFFF;">                    SP=sind(P); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 252</span> <span style="color: #000000; background: #FFFFFF;">                    CR=cosd(0); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 253</span> <span style="color: #000000; background: #FFFFFF;">                    SR=sind(0); </span><br/>               <span style="color: #A0A0A0"> 254</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 255</span> <span style="color: #228B22; background: #FFFFFF;">                    % Convert ship data to earth data</span><br/>               <span style="color: #A0A0A0"> 256</span> <span style="color: #228B22; background: #FFFFFF;">                    % -------------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 257</span> <span style="color: #000000; background: #FFFFFF;">                    obj.btVel=nan(4,obj.numEns); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 258</span> <span style="color: #000000; background: #FFFFFF;">                    for ii=1:obj.numEns </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 259</span> <a name="Line259"></a><span style="color: #000000; background: #FFFFFF;">                        trans_ie=[((CH(ii).*CR)+(SH(ii).*SP.*SR)) (SH(ii).*CP) ((CH(ii).*SR)-(SH(ii).*SP.*CR));... </span><br/>               <span style="color: #A0A0A0"> 260</span> <span style="color: #000000; background: #FFFFFF;">                            ((-1.*SH(ii).*CR)+(CH(ii).*SP.*SR)) (CH(ii).*CP) ((-1.*SH(ii).*SR)-(CH(ii).*SP.*CR));...</span><br/>               <span style="color: #A0A0A0"> 261</span> <span style="color: #000000; background: #FFFFFF;">                            (-1.*CP.*SR) (SP) (CP.*CR)];</span><br/>               <span style="color: #A0A0A0"> 262</span> <span style="color: #228B22; background: #FFFFFF;">                        </span><br/><a name="Line263"></a><span style="color: #FF0000">  0.02 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 263</span> <a name="Line263"></a><span style="color: #000000; background: #FFFFFF;">                        obj.btVel(1:3,ii)=trans_ie*Bt.vel_mps(1:3,ii); </span><br/><a name="Line264"></a>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 264</span> <span style="color: #000000; background: #FFFFFF;">                        obj.btVel(4,ii)=Bt.vel_mps(4,ii); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 265</span> <span style="color: #000000; background: #FFFFFF;">                    end </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 266</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wtVel=nan(obj.maxCells,obj.numEns,4); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 267</span> <span style="color: #000000; background: #FFFFFF;">                    for ii=1:obj.numEns </span><br/><a name="Line268"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 268</span> <a name="Line268"></a><span style="color: #000000; background: #FFFFFF;">                        vel_temp=<a href="file116.html">squeeze</a>(Wt.vel_mps(:,ii,:))'; </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 269</span> <span style="color: #000000; background: #FFFFFF;">                        trans_ie=[((CH(ii).*CR)+(SH(ii).*SP.*SR)) (SH(ii).*CP) ((CH(ii).*SR)-(SH(ii).*SP.*CR));... </span><br/>               <span style="color: #A0A0A0"> 270</span> <span style="color: #000000; background: #FFFFFF;">                            ((-1.*SH(ii).*CR)+(CH(ii).*SP.*SR)) (CH(ii).*CP) ((-1.*SH(ii).*SR)-(CH(ii).*SP.*CR));...</span><br/>               <span style="color: #A0A0A0"> 271</span> <span style="color: #000000; background: #FFFFFF;">                            (-1.*CP.*SR) (SP) (CP.*CR)];</span><br/>               <span style="color: #A0A0A0"> 272</span> <span style="color: #228B22; background: #FFFFFF;">                        </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 273</span> <span style="color: #000000; background: #FFFFFF;">                        vel_earth_temp=trans_ie*vel_temp(1:3,:); </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 274</span> <span style="color: #000000; background: #FFFFFF;">                        vel_earth_temp(4,:)=vel_temp(4,:); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 275</span> <span style="color: #000000; background: #FFFFFF;">                        obj.wtVel(:,ii,:)=vel_earth_temp'; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 276</span> <span style="color: #000000; background: #FFFFFF;">                    end </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 277</span> <span style="color: #000000; background: #FFFFFF;">                    obj.btVel_reGGA(1,:) = -Gps.ggaVelE_mps; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 278</span> <span style="color: #000000; background: #FFFFFF;">                    obj.btVel_reGGA(2,:) = -Gps.ggaVelN_mps; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 279</span> <span style="color: #000000; background: #FFFFFF;">                    obj.btVel_reVTG(1,:) = -Gps.vtgVelE_mps; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 280</span> <span style="color: #000000; background: #FFFFFF;">                    obj.btVel_reVTG(2,:) = -Gps.vtgVelN_mps; </span><br/>               <span style="color: #A0A0A0"> 281</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 282</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 283</span> <span style="color: #228B22; background: #FFFFFF;">                    % Convert water track velocity to water velocity</span><br/>               <span style="color: #A0A0A0"> 284</span> <span style="color: #228B22; background: #FFFFFF;">                    % ----------------------------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 285</span> <span style="color: #000000; background: #FFFFFF;">                    wVel(:,:,1)=obj.wtVel(:,:,1)-<a href="file112.html">repmat</a>(obj.btVel(1,:),size(obj.wtVel,1),1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 286</span> <span style="color: #000000; background: #FFFFFF;">                    wVel(:,:,2)=obj.wtVel(:,:,2)-<a href="file112.html">repmat</a>(obj.btVel(2,:),size(obj.wtVel,1),1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 287</span> <span style="color: #000000; background: #FFFFFF;">                    wVel(:,:,3)=obj.wtVel(:,:,3)-<a href="file112.html">repmat</a>(obj.btVel(3,:),size(obj.wtVel,1),1); %added by EJ </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 288</span> <span style="color: #000000; background: #FFFFFF;">                    wVel(:,:,4)=obj.wtVel(:,:,4); %added by EJ </span><br/>               <span style="color: #A0A0A0"> 289</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 290</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVelx(:,:)=wVel(1:obj.maxCells,:,1).*obj.cellsAboveSL; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 291</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVely(:,:)=wVel(1:obj.maxCells,:,2).*obj.cellsAboveSL; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 292</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVelz(:,:)=wVel(1:obj.maxCells,:,3).*obj.cellsAboveSL; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 293</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVelerr(:,:)=wVel(1:obj.maxCells,:,4).*obj.cellsAboveSL; </span><br/>               <span style="color: #A0A0A0"> 294</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 295</span> <span style="color: #228B22; background: #FFFFFF;">                    %====================</span><br/>               <span style="color: #A0A0A0"> 296</span> <span style="color: #228B22; background: #FFFFFF;">                    % ADDED by SAM 2013-07-17</span><br/>               <span style="color: #A0A0A0"> 297</span> <span style="color: #228B22; background: #FFFFFF;">                    %====================</span><br/>               <span style="color: #A0A0A0"> 298</span> <span style="color: #228B22; background: #FFFFFF;">                    % if using gps as the bottom reference</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 299</span> <span style="color: #000000; background: #FFFFFF;">                    wVel_reGGA(:,:,1)=obj.wtVel(:,:,1)-<a href="file112.html">repmat</a>(obj.btVel_reGGA(1,:),size(obj.wtVel,1),1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 300</span> <span style="color: #000000; background: #FFFFFF;">                    wVel_reGGA(:,:,2)=obj.wtVel(:,:,2)-<a href="file112.html">repmat</a>(obj.btVel_reGGA(2,:),size(obj.wtVel,1),1); </span><br/>               <span style="color: #A0A0A0"> 301</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 302</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVelx_reGGA(:,:)=wVel_reGGA(1:obj.maxCells,:,1).*obj.cellsAboveSL; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 303</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVely_reGGA(:,:)=wVel_reGGA(1:obj.maxCells,:,2).*obj.cellsAboveSL; </span><br/>               <span style="color: #A0A0A0"> 304</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 305</span> <span style="color: #000000; background: #FFFFFF;">                    wVel_reVTG(:,:,1)=obj.wtVel(:,:,1)-<a href="file112.html">repmat</a>(obj.btVel_reVTG(1,:),size(obj.wtVel,1),1); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 306</span> <span style="color: #000000; background: #FFFFFF;">                    wVel_reVTG(:,:,2)=obj.wtVel(:,:,2)-<a href="file112.html">repmat</a>(obj.btVel_reVTG(2,:),size(obj.wtVel,1),1); </span><br/>               <span style="color: #A0A0A0"> 307</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 308</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVelx_reVTG(:,:)=wVel_reVTG(1:obj.maxCells,:,1).*obj.cellsAboveSL; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 309</span> <span style="color: #000000; background: #FFFFFF;">                    obj.wVely_reVTG(:,:)=wVel_reVTG(1:obj.maxCells,:,2).*obj.cellsAboveSL; </span><br/>               <span style="color: #A0A0A0"> 310</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 311</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 312</span> <span style="color: #228B22; background: #FFFFFF;">                    </span><br/>               <span style="color: #A0A0A0"> 313</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 314</span> <span style="color: #228B22; background: #FFFFFF;">                    % Develop distance to center of top cell for each ensemble</span><br/>               <span style="color: #A0A0A0"> 315</span> <span style="color: #228B22; background: #FFFFFF;">                    % --------------------------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 316</span> <span style="color: #000000; background: #FFFFFF;">                    depth=obj.beamDepths'; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 317</span> <span style="color: #000000; background: #FFFFFF;">                    if <a href="file114.html">nanmax</a>(noSurfCells)&gt;0 </span><br/>               <span style="color: #A0A0A0"> 318</span> <span style="color: #A0A0A0; background: #FFFFFF;">                        dist_cell1_m=surfCell1Dist;</span><br/>               <span style="color: #A0A0A0"> 319</span> <span style="color: #A0A0A0; background: #FFFFFF;">                        dist_cell1_m(surfCells_idx)=cell1Dist(surfCells_idx);</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 320</span> <span style="color: #228B22; background: #FFFFFF;">                    else </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 321</span> <span style="color: #000000; background: #FFFFFF;">                        dist_cell1_m=cell1Dist; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 322</span> <span style="color: #000000; background: #FFFFFF;">                    end </span><br/>               <span style="color: #A0A0A0"> 323</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 324</span> <span style="color: #228B22; background: #FFFFFF;">                    % Combine cell size and cell range from transducer for both</span><br/>               <span style="color: #A0A0A0"> 325</span> <span style="color: #228B22; background: #FFFFFF;">                    % surface and regular cells</span><br/>               <span style="color: #A0A0A0"> 326</span> <span style="color: #228B22; background: #FFFFFF;">                    % ---------------------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 327</span> <span style="color: #000000; background: #FFFFFF;">                    obj.cellDepth=nan(obj.maxCells,obj.numEns); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 328</span> <span style="color: #000000; background: #FFFFFF;">                    cellSizeAll=nan(obj.maxCells,obj.numEns); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 329</span> <span style="color: #000000; background: #FFFFFF;">                    for ii=1:obj.numEns </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 330</span> <span style="color: #000000; background: #FFFFFF;">                        if <a href="file114.html">nanmax</a>(noSurfCells)&gt;0 </span><br/>               <span style="color: #A0A0A0"> 331</span> <span style="color: #A0A0A0; background: #FFFFFF;">                            numRegCells=obj.maxCells-noSurfCells(ii);</span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 332</span> <span style="color: #228B22; background: #FFFFFF;">                        else </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 333</span> <span style="color: #000000; background: #FFFFFF;">                            numRegCells=obj.maxCells; </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 334</span> <span style="color: #000000; background: #FFFFFF;">                        end </span><br/>               <span style="color: #A0A0A0"> 335</span> <span style="color: #228B22; background: #FFFFFF;">                        %</span><br/>               <span style="color: #A0A0A0"> 336</span> <span style="color: #228B22; background: #FFFFFF;">                        % Surface cell are present</span><br/>               <span style="color: #A0A0A0"> 337</span> <span style="color: #228B22; background: #FFFFFF;">                        % ------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 338</span> <span style="color: #000000; background: #FFFFFF;">                        if <a href="file114.html">nanmax</a>(noSurfCells)&gt;0 &amp;&amp; noSurfCells(ii)&gt;0 </span><br/>               <span style="color: #A0A0A0"> 339</span> <span style="color: #A0A0A0; background: #FFFFFF;">                            obj.cellDepth(1:noSurfCells(ii),ii)=dist_cell1_m(ii)+(0:surfCellSize(ii):(noSurfCells(ii)-1)*surfCellSize(ii))';</span><br/>               <span style="color: #A0A0A0"> 340</span> <span style="color: #A0A0A0; background: #FFFFFF;">                            obj.cellDepth(noSurfCells(ii)+1:end,ii)=obj.cellDepth(noSurfCells(ii),ii)+0.5*surfCellSize(ii)+0.5.*regCellSize(ii)+(0:regCellSize(ii):(numRegCells-1)*regCellSize(ii));</span><br/>               <span style="color: #A0A0A0"> 341</span> <span style="color: #A0A0A0; background: #FFFFFF;">                            cellSizeAll(1:noSurfCells(ii),ii)=repmat(surfCellSize(ii),noSurfCells(ii),1);</span><br/>               <span style="color: #A0A0A0"> 342</span> <span style="color: #A0A0A0; background: #FFFFFF;">                            cellSizeAll(noSurfCells(ii)+1:end,ii)=repmat(regCellSize(ii),numRegCells,1);</span><br/>               <span style="color: #A0A0A0"> 343</span> <span style="color: #228B22; background: #FFFFFF;">                            %</span><br/>               <span style="color: #A0A0A0"> 344</span> <span style="color: #228B22; background: #FFFFFF;">                            % No surface cells</span><br/>               <span style="color: #A0A0A0"> 345</span> <span style="color: #228B22; background: #FFFFFF;">                            % ----------------</span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 346</span> <span style="color: #228B22; background: #FFFFFF;">                        else </span><br/>               <span style="color: #A0A0A0"> 347</span> <span style="color: #228B22; background: #FFFFFF;">                            %ii</span><br/><a name="Line348"></a><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 348</span> <span style="color: #000000; background: #FFFFFF;">                            obj.cellDepth(1:numRegCells,ii)=dist_cell1_m(ii)+[0:regCellSize(ii):(numRegCells-1)*regCellSize(ii)]; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 349</span> <a name="Line349"></a><span style="color: #000000; background: #FFFFFF;">                            cellSizeAll(1:end,ii)=<a href="file112.html">repmat</a>(regCellSize(ii),numRegCells,1); </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 350</span> <span style="color: #000000; background: #FFFFFF;">                        end </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 351</span> <span style="color: #000000; background: #FFFFFF;">                    end </span><br/>               <span style="color: #A0A0A0"> 352</span> <span style="color: #228B22; background: #FFFFFF;">                    % Compute cell depths from water surface</span><br/>               <span style="color: #A0A0A0"> 353</span> <span style="color: #228B22; background: #FFFFFF;">                    % --------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 354</span> <span style="color: #000000; background: #FFFFFF;">                    obj.cellDepth=obj.cellDepth+obj.draft; </span><br/>               <span style="color: #A0A0A0"> 355</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 356</span> <span style="color: #228B22; background: #FFFFFF;">                    % Compute weighted mean depth</span><br/>               <span style="color: #A0A0A0"> 357</span> <span style="color: #228B22; background: #FFFFFF;">                    % ---------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 358</span> <span style="color: #000000; background: #FFFFFF;">                    w=1-depth./<a href="file112.html">repmat</a>(<a href="file118.html">nansum</a>(depth,2),1,4); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 359</span> <span style="color: #000000; background: #FFFFFF;">                    obj.depthEns=<a href="file118.html">nansum</a>((depth.*w)./<a href="file112.html">repmat</a>(<a href="file118.html">nansum</a>(w,2),1,4),2)'; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 360</span> <span style="color: #000000; background: #FFFFFF;">                    obj.depthEns=obj.depthEns+obj.draft; </span><br/>               <span style="color: #A0A0A0"> 361</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 362</span> <span style="color: #228B22; background: #FFFFFF;">                    % Compute time for each ensemble</span><br/>               <span style="color: #A0A0A0"> 363</span> <span style="color: #228B22; background: #FFFFFF;">                    % -------------------------------</span><br/><a name="Line364"></a>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 364</span> <span style="color: #000000; background: #FFFFFF;">                    ensTimeSec=Sensor.time(:,1).*3600+Sensor.time(:,2).*60+Sensor.time(:,3)+Sensor.time(:,4)./100; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 365</span> <span style="color: #000000; background: #FFFFFF;">                    obj.ensDeltaTime=nan(size(ensTimeSec)); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 366</span> <span style="color: #000000; background: #FFFFFF;">                    idxtime=find(~isnan(ensTimeSec)); </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 367</span> <span style="color: #000000; background: #FFFFFF;">                    obj.ensDeltaTime(idxtime(2:end))=<a href="file119.html">nandiff</a>(ensTimeSec(idxtime)); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 368</span> <span style="color: #000000; background: #FFFFFF;">                    idx24hr=find(obj.ensDeltaTime&lt;0); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 369</span> <span style="color: #000000; background: #FFFFFF;">                    obj.ensDeltaTime(idx24hr)=24.*3600+obj.ensDeltaTime(idx24hr); </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 370</span> <span style="color: #000000; background: #FFFFFF;">                    obj.ensDeltaTime=obj.ensDeltaTime'; </span><br/>               <span style="color: #A0A0A0"> 371</span> <span style="color: #228B22; background: #FFFFFF;">                    %</span><br/>               <span style="color: #A0A0A0"> 372</span> <span style="color: #228B22; background: #FFFFFF;">                    % Identify invalid ensembles and invalid cells with valid</span><br/>               <span style="color: #A0A0A0"> 373</span> <span style="color: #228B22; background: #FFFFFF;">                    % ensembles</span><br/>               <span style="color: #A0A0A0"> 374</span> <span style="color: #228B22; background: #FFFFFF;">                    % --------------------------------------------------------</span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 375</span> <span style="color: #000000; background: #FFFFFF;">                    obj.idxInvalidEns=[]; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 376</span> <span style="color: #000000; background: #FFFFFF;">                    obj.idxInvalidCells=[]; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 377</span> <span style="color: #000000; background: #FFFFFF;">                    for j=1:obj.numEns </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 378</span> <span style="color: #000000; background: #FFFFFF;">                        test=find(~isnan(obj.wVelx(:,j)), 1); </span><br/>               <span style="color: #A0A0A0"> 379</span> <span style="color: #228B22; background: #FFFFFF;">                        %</span><br/>               <span style="color: #A0A0A0"> 380</span> <span style="color: #228B22; background: #FFFFFF;">                        % If entire ensemble has no valid data the ensemble is</span><br/>               <span style="color: #A0A0A0"> 381</span> <span style="color: #228B22; background: #FFFFFF;">                        % marked invalid.</span><br/>               <span style="color: #A0A0A0"> 382</span> <span style="color: #228B22; background: #FFFFFF;">                        % -----------------------------------------------------</span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 383</span> <span style="color: #000000; background: #FFFFFF;">                        if ~isempty(test) </span><br/>               <span style="color: #A0A0A0"> 384</span> <span style="color: #228B22; background: #FFFFFF;">                            %</span><br/>               <span style="color: #A0A0A0"> 385</span> <span style="color: #228B22; background: #FFFFFF;">                            % Identify invalid cells above sidelobe</span><br/>               <span style="color: #A0A0A0"> 386</span> <span style="color: #228B22; background: #FFFFFF;">                            % -------------------------------------</span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    143 </span><span style="color: #000000; font-weight: bold"> 387</span> <span style="color: #000000; background: #FFFFFF;">                            junk=find(isnan(obj.wVelx(1:obj.numCells(j),j)))+(j-1).*obj.maxCells; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">    143 </span><span style="color: #000000; font-weight: bold"> 388</span> <span style="color: #000000; background: #FFFFFF;">                            obj.idxInvalidCells=[obj.idxInvalidCells; junk]; </span><br/>       <span style="color: #0000FF">     11 </span><span style="color: #000000; font-weight: bold"> 389</span> <span style="color: #228B22; background: #FFFFFF;">                        else </span><br/>       <span style="color: #0000FF">     11 </span><span style="color: #000000; font-weight: bold"> 390</span> <span style="color: #000000; background: #FFFFFF;">                            obj.idxInvalidEns=[obj.idxInvalidEns; j]; </span><br/>       <span style="color: #0000FF">     11 </span><span style="color: #000000; font-weight: bold"> 391</span> <span style="color: #000000; background: #FFFFFF;">                        end </span><br/>       <span style="color: #0000FF">    154 </span><span style="color: #000000; font-weight: bold"> 392</span> <span style="color: #000000; background: #FFFFFF;">                    end </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 393</span> <span style="color: #000000; background: #FFFFFF;">                    obj.perInvalidEns=(length(obj.idxInvalidEns)./length(obj.depthEns)).*100; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 394</span> <span style="color: #000000; background: #FFFFFF;">                    obj.perInvalidCells=(length(obj.idxInvalidCells)./(length(find(~isnan(obj.wVelx)))+length(obj.idxInvalidCells))).*100; </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 395</span> <span style="color: #000000; background: #FFFFFF;">                end </span><br/>               <span style="color: #A0A0A0"> 396</span> <span style="color: #228B22; background: #FFFFFF;">                </span><br/><span style="color: #FF0000">&lt; 0.01 </span><span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 397</span> <span style="color: #000000; background: #FFFFFF;">                if obj.numEns&gt;0 </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 398</span> <span style="color: #000000; background: #FFFFFF;">                    obj.validData=1; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 399</span> <span style="color: #000000; background: #FFFFFF;">                    obj.cellSize=cellSizeAll; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 400</span> <span style="color: #000000; background: #FFFFFF;">                    obj.filename=filename; </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 401</span> <span style="color: #000000; background: #FFFFFF;">                end </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 402</span> <span style="color: #000000; background: #FFFFFF;">            end </span><br/>       <span style="color: #0000FF">      1 </span><span style="color: #000000; font-weight: bold"> 403</span> <span style="color: #000000; background: #FFFFFF;">        end </span><br/></pre><p><p>Other subfunctions in this file are not included in this listing.</body></html>